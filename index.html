<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이메일로 자료 받기</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { 
            font-family:'Malgun Gothic',sans-serif; 
            background:linear-gradient(135deg,#667eea,#764ba2); 
            min-height:100vh; 
            display:flex;
            flex-direction:column;
            justify-content:center; 
            align-items:center; 
            padding:40px 20px; 
        }
        .wrapper {
            width:100%;
            max-width:967px;
            display:flex;
            flex-direction:column;
            align-items:center;
        }
        .logo {
            width:100%;
            max-width:967px;
            margin-bottom:30px;
        }
        .logo img {
            width:100%;
            height:auto;
            display:block;
        }
        .container { 
            background:white; 
            border-radius:20px; 
            box-shadow:0 20px 60px rgba(0,0,0,0.3); 
            padding:40px; 
            max-width:500px; 
            width:100%; 
        }
        h1 { 
            color:#333; 
            margin-bottom:10px; 
            text-align:center; 
            font-size:28px; 
        }
        .subtitle {
            text-align:center;
            color:#666;
            font-size:14px;
            margin-bottom:30px;
        }
        .form-group { 
            margin-bottom:25px; 
        }
        label { 
            display:block; 
            color:#555; 
            font-weight:600; 
            margin-bottom:8px; 
            font-size:14px; 
        }
        .optional {
            color:#999;
            font-weight:400;
            font-size:12px;
        }
        input[type="text"],
        input[type="email"] { 
            width:100%; 
            padding:12px 15px; 
            border:2px solid #e0e0e0; 
            border-radius:8px; 
            font-size:15px; 
            transition:all .3s; 
        }
        input[type="text"]:focus,
        input[type="email"]:focus { 
            outline:none; 
            border-color:#667eea; 
            box-shadow:0 0 0 3px rgba(102,126,234,0.1); 
        }
        input.error { 
            border-color:#ff4757; 
        }
        .error-message { 
            color:#ff4757; 
            font-size:12px; 
            margin-top:5px; 
            display:none; 
        }
        .error-message.show { 
            display:block; 
        }
        .agreements {
            margin-bottom:25px;
            padding:15px;
            background:#f8f9fa;
            border-radius:8px;
        }
        .agreement-item {
            margin-bottom:12px;
            display:flex;
            align-items:center;
        }
        .agreement-item:last-child {
            margin-bottom:0;
        }
        .agreement-item input[type="checkbox"] {
            width:18px;
            height:18px;
            margin-right:10px;
            cursor:pointer;
        }
        .agreement-item label {
            margin:0;
            font-size:14px;
            font-weight:400;
            cursor:pointer;
            display:flex;
            align-items:center;
        }
        .agreement-item a {
            color:#667eea;
            text-decoration:none;
            margin-left:5px;
        }
        .agreement-item a:hover {
            text-decoration:underline;
        }
        button { 
            width:100%; 
            padding:14px; 
            background:linear-gradient(135deg,#667eea,#764ba2); 
            color:white; 
            border:none; 
            border-radius:8px; 
            font-size:16px; 
            font-weight:600; 
            cursor:pointer; 
            transition:.2s; 
        }
        button:hover:not(:disabled) { 
            transform:translateY(-2px); 
            box-shadow:0 10px 20px rgba(102,126,234,0.3); 
        }
        button:disabled {
            opacity:0.4;
            cursor:not-allowed;
            transform:none;
            background:#ccc;
        }
        .success-message { 
            background:#10b981; 
            color:white; 
            padding:15px; 
            border-radius:8px; 
            text-align:center; 
            margin-top:20px; 
            display:none; 
            line-height:1.5; 
        }
        .success-message.show { 
            display:block; 
            animation:slideDown .3s; 
        }
        @keyframes slideDown { 
            from{opacity:0; transform:translateY(-10px);} 
            to{opacity:1; transform:translateY(0);} 
        }
        .footer {
            margin-top:40px;
            padding:30px 20px;
            background:rgba(255,255,255,0.1);
            border-radius:15px;
            text-align:center;
            color:white;
            max-width:967px;
            width:100%;
        }
        .footer-content {
            line-height:1.8;
            font-size:14px;
        }
        .footer-title {
            font-size:18px;
            font-weight:600;
            margin-bottom:15px;
        }
        .footer-divider {
            height:1px;
            background:rgba(255,255,255,0.3);
            margin:15px 0;
        }
        .footer-links {
            margin-top:15px;
        }
        .footer-links a {
            color:white;
            text-decoration:none;
            margin:0 10px;
            opacity:0.9;
        }
        .footer-links a:hover {
            opacity:1;
            text-decoration:underline;
        }
        @media (max-width:1000px) {
            .logo,
            .wrapper,
            .footer {
                max-width:100%;
            }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="logo">
            <img src="logo.png" alt="로고">
        </div>
        
        <div class="container">
            <h1>이메일로 자료 받기</h1>
            <p class="subtitle">입력하신 이메일로 자료를 보내드립니다</p>
            
            <form id="downloadForm">
                <div class="form-group">
                    <label for="company">회사명</label>
                    <input type="text" id="company" required>
                    <div class="error-message" id="companyError">회사명을 입력해주세요.</div>
                </div>
                
                <div class="form-group">
                    <label for="name">담당자 <span class="optional">(선택)</span></label>
                    <input type="text" id="name">
                    <div class="error-message" id="nameError">담당자명을 입력해주세요.</div>
                </div>
                
                <div class="form-group">
                    <label for="email">이메일</label>
                    <input type="email" id="email" required>
                    <div class="error-message" id="emailError">올바른 이메일 주소를 입력해주세요.</div>
                </div>
                
                <div class="agreements">
                    <div class="agreement-item">
                        <input type="checkbox" id="privacy" required>
                        <label for="privacy">
                            <a href="privacy.html" target="_blank">개인정보 처리방침</a>에 동의합니다
                        </label>
                    </div>
                    <div class="agreement-item">
                        <input type="checkbox" id="terms" required>
                        <label for="terms">
                            <a href="terms.html" target="_blank">이용약관</a>에 동의합니다
                        </label>
                    </div>
                </div>
                
                <button type="submit" id="submitBtn" disabled>신청하기</button>
            </form>
            
            <div class="success-message" id="successMessage">
                ✅ 신청이 완료되었습니다!<br>
                입력하신 이메일로 자료를 발송했습니다.
            </div>
        </div>
        
        <div class="footer">
            <div class="footer-title">회사명</div>
            <div class="footer-divider"></div>
            <div class="footer-content">
                대표이사: 권순일 | 사업자등록번호: 858-17-02458<br>
                주소: 경기도 부천시 원미구 소향로13번길 14-22 802-23<br>
                전화: 010-8384-4991 | 이메일: contact@dumokdatalab.com
            </div>
            <div class="footer-divider"></div>
            <div class="footer-links">
                <a href="privacy.html" target="_blank">개인정보처리방침</a>
                <a href="terms.html" target="_blank">이용약관</a>
            </div>
            <div style="margin-top:15px; font-size:12px; opacity:0.8;">
                © 2025 두목데이터랩. All rights reserved.
            </div>
        </div>
    </div>

    <script>
        // ═══════════════════════════════════════════
        // ✏️ 여기만 수정하세요!
        // ═══════════════════════════════════════════
        
        // Google Apps Script 웹 앱 URL
        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';
        
        // ═══════════════════════════════════════════
        // ⚠️ 아래 코드는 수정하지 마세요!
        // ═══════════════════════════════════════════

        const form = document.getElementById('downloadForm');
        const companyInput = document.getElementById('company');
        const nameInput = document.getElementById('name');
        const emailInput = document.getElementById('email');
        const privacyCheckbox = document.getElementById('privacy');
        const termsCheckbox = document.getElementById('terms');
        const submitBtn = document.getElementById('submitBtn');
        const successMessage = document.getElementById('successMessage');

        // 체크박스 상태에 따라 버튼 활성화/비활성화
        function updateButtonState() {
            if (privacyCheckbox.checked && termsCheckbox.checked) {
                submitBtn.disabled = false;
            } else {
                submitBtn.disabled = true;
            }
        }

        privacyCheckbox.addEventListener('change', updateButtonState);
        termsCheckbox.addEventListener('change', updateButtonState);

        function isValidEmail(email) { 
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); 
        }

        function showError(input, msg) {
            input.classList.add('error');
            const el = document.getElementById(input.id + 'Error');
            el.textContent = msg;
            el.classList.add('show');
        }
        
        function clearError(input) {
            input.classList.remove('error');
            document.getElementById(input.id + 'Error').classList.remove('show');
        }

        async function saveToGoogleSheets() {
            const data = {
                company: companyInput.value.trim(),
                name: nameInput.value.trim(),
                email: emailInput.value.trim(),
                timestamp: new Date().toLocaleString('ko-KR')
            };
            
            try {
                const response = await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'text/plain' },
                    body: JSON.stringify(data)
                });
                return true;
            } catch (error) {
                console.error('Error:', error);
                return false;
            }
        }

        form.addEventListener('submit', async function(e) {
            e.preventDefault();

            // 입력 검증
            let valid = true;
            
            if (!companyInput.value.trim()) { 
                showError(companyInput, '회사명을 입력해주세요.'); 
                valid = false; 
            } else {
                clearError(companyInput);
            }
            
            // 담당자는 선택사항 (검증 안 함)
            clearError(nameInput);
            
            if (!isValidEmail(emailInput.value)) { 
                showError(emailInput, '올바른 이메일 주소를 입력해주세요.'); 
                valid = false; 
            } else {
                clearError(emailInput);
            }
            
            if (!valid) return;

            // 버튼 비활성화
            submitBtn.disabled = true;
            submitBtn.textContent = '전송 중...';

            // Google Sheets에 저장
            const saved = await saveToGoogleSheets();

            if (saved || GOOGLE_SCRIPT_URL.includes('YOUR_SCRIPT_ID')) {
                // 성공 메시지
                successMessage.classList.add('show');
                form.reset();
                
                // 체크박스 초기화로 버튼 다시 비활성화
                updateButtonState();
                
                // 3초 후 메시지 숨기기
                setTimeout(() => {
                    successMessage.classList.remove('show');
                    submitBtn.textContent = '신청하기';
                }, 3000);
            } else {
                alert('전송 중 오류가 발생했습니다. 다시 시도해주세요.');
                submitBtn.disabled = false;
                submitBtn.textContent = '신청하기';
            }
        });

        // 입력 시 에러 제거
        companyInput.addEventListener('input', () => clearError(companyInput));
        nameInput.addEventListener('input', () => clearError(nameInput));
        emailInput.addEventListener('input', () => clearError(emailInput));
    </script>
</body>
</html>